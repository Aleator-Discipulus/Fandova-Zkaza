<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fandova Zk√°za</title>
  <style>
    :root{
      --bg:#0f1115;--card:#171a21;--muted:#8a93a6;--text:#e6e9f2;--accent:#8b5cf6;--good:#16a34a;--bad:#dc2626;--btn:#222635;--ring:#2a3042;
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 600px at 10% -10%,#1d2232 10%,transparent 60%),radial-gradient(1000px 600px at 110% 10%,#1a2030 10%,transparent 60%),var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;}
    .wrap{max-width:900px;margin:40px auto;padding:0 16px}
    h1{font-size:40px;margin:0 0 8px;letter-spacing:.5px}
    .subtitle{color:var(--muted);margin-bottom:24px}
    .grid{display:grid;gap:12px;grid-template-columns:repeat(4,1fr);}
    .btn{appearance:none;border:1px solid transparent;background:var(--btn);color:var(--text);padding:12px 14px;border-radius:14px;font-weight:600;cursor:pointer;transition:.2s;box-shadow:0 1px 0 rgba(0,0,0,.2)}
    .btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(0,0,0,.25);border-color:var(--ring)}
    .btn.primary{background:linear-gradient(180deg,#6d28d9,#4c1d95);border-color:#6d28d9}
    .btn.good{background:linear-gradient(180deg,#16a34a,#14532d);border-color:#16a34a}
    .btn.bad{background:linear-gradient(180deg,#dc2626,#7f1d1d);border-color:#dc2626}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.06);backdrop-filter:blur(8px);border-radius:16px;padding:16px 18px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .card h2{margin:4px 0 8px}
    .task{font-size:18px;font-weight:700;margin:4px 0 8px}
    .muted{color:var(--muted)}
    .list{margin:8px 0 0 18px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .form{display:grid;gap:10px;grid-template-columns:1fr 1fr 220px auto}
    input,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:#10131b;color:var(--text);outline:none}
    input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(139,92,246,.25)}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;background:#111425;border:1px solid rgba(255,255,255,.08);border-radius:999px}
    .footer{margin-top:22px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .badge{font-size:12px;color:#cbd5e1;background:#111826;border:1px solid rgba(255,255,255,.08);padding:6px 10px;border-radius:999px}
    @media (max-width:720px){.grid{grid-template-columns:1fr 1fr}.form{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üçª Fandova Zk√°za</h1>
    <div class="subtitle">Vyber obt√≠≈ænost ‚Üí vylosuj √∫kol ‚Üí spl≈à nebo vra≈• do slosov√°n√≠. Odmƒõna se zobraz√≠ a≈æ po potvrzen√≠ splnƒõn√≠.</div>

    <div class="grid" id="difficultyButtons">
      <button class="btn" data-level="lehka">Lehk√°</button>
      <button class="btn" data-level="stredni">St≈ôedn√≠</button>
      <button class="btn" data-level="tezka">Tƒõ≈æk√°</button>
      <button class="btn" data-level="sormovice">Zasran√° ≈†ormovice</button>
    </div>

    <div id="taskCard" class="card" style="margin-top:16px; display:none;">
      <h2>Aktu√°ln√≠ √∫kol <span class="badge" id="badgeLevel"></span></h2>
      <div class="task" id="taskText"></div>
      <div class="muted" id="rewardLine" style="display:none;">Odmƒõna: <strong id="taskReward"></strong></div>
      <div class="row" style="margin-top:10px">
        <button class="btn good" id="btnDone">Splnƒõno ‚úÖ</button>
        <button class="btn bad" id="btnFail">Nesplnƒõno ‚ùå</button>
        <button class="btn" id="btnNext" style="display:none">Dal≈°√≠ √∫kol ‚Üª</button>
      </div>
    </div>

    <div class="card" style="margin-top:16px;">
      <h2>üìä Tabulka vypit√Ωch vƒõc√≠</h2>
      <div class="muted" id="emptyLog">Zat√≠m nic nevypito‚Ä¶</div>
      <ul class="list" id="drinkLog" style="display:none"></ul>
      <div class="footer" id="drinkSummary" style="display:none"></div>
    </div>

    <div class="card" style="margin-top:16px;">
      <h2>‚ûï P≈ôidat nov√Ω √∫kol</h2>
      <div class="form">
        <input id="inputTask" placeholder="Text √∫kolu" />
        <input id="inputReward" placeholder="Odmƒõna (nap≈ô. Pan√°k rumu)" />
        <select id="selectLevel">
          <option value="lehka">Lehk√°</option>
          <option value="stredni">St≈ôedn√≠</option>
          <option value="tezka">Tƒõ≈æk√°</option>
          <option value="sormovice">Zasran√° ≈†ormovice</option>
        </select>
        <button class="btn primary" id="btnAdd">P≈ôidat √∫kol</button>
      </div>
    </div>
  </div>

  <script>
    const tasks = {
      lehka:[
        {text:"Vyjmenuj 10 nejlep≈°√≠ch vlastnost√≠ nast√°vaj√≠c√≠ nahlas p≈ôed v≈°emi", reward:"Pan√°k piva"},
        {text:"Udƒõl√°≈° 20 d≈ôep≈Ø p≈ôi hlasit√©m zpƒõvu svatebn√≠ho pochodu", reward:"Pan√°k slivovice"},
        {text:"P≈ôedveƒè m√≥dn√≠ p≈ôehl√≠dku v kost√Ωmu slo≈æen√©m kamar√°dy z n√°hodn√Ωch kus≈Ø obleƒçen√≠", reward:"Pan√°k rumu"},
      ],
      stredni:[
        {text:"Vypij pan√°ka bez pou≈æit√≠ rukou (pouze pusou)", reward:"Pan√°k whisky"},
        {text:"Zazp√≠vej karaoke p√≠sniƒçku, kterou vyberou kamar√°di", reward:"Pan√°k tequily"},
        {text:"Odvypr√°vƒõj nejtrapnƒõj≈°√≠ historku ze sv√©ho ≈æivota", reward:"Pan√°k vodky"},
        {text:"Snƒõz bizarn√≠ kombinaci j√≠del p≈ôipravenou ostatn√≠mi (nap≈ô. klob√°sa s marmel√°dou)", reward:"Dvojit√Ω pan√°k + pivo"},
      ],
      tezka:[
        {text:"P≈ôedveƒè improvizovan√Ω tanec po dobu 3 minut na vybranou p√≠se≈à", reward:"Pan√°k absinthu"},
        {text:"Na st≈Øl p≈ôednes svatebn√≠ p≈ô√≠sahu ve formƒõ stand-up vystoupen√≠", reward:"Pan√°k ginu"},
        {text:"Udƒõlej 5 klik≈Ø s kamar√°dem na z√°dech", reward:"2 pan√°ky dle v√Ωbƒõru"},
        {text:"Nech si na obliƒçej nebo b≈ôicho nakreslit tetov√°n√≠ fixou a nos ho cel√Ω veƒçer", reward:"Pan√°k ohniv√© vody"},
      ],
      sormovice:[
        {text:"Obƒõhni chatu v boxerk√°ch nebo √∫plnƒõ nah√Ω (podle odvahy)", reward:"Pan√°k dle v√Ωbƒõru"},
        {text:"Nech si na z√°da nakreslit ob≈ô√≠ n√°pis fixou (nap≈ô. 'Pod pantoflem') a nos ho cel√Ω veƒçer", reward:"Pan√°k slivovice"},
        {text:"Otev≈ôi pusu a nech si l√≠t pivo dokud nezaƒçne≈° prskat sm√≠chy", reward:"Pan√°k rumu"},
        {text:"Snƒõz 'speci√°ln√≠ sendviƒç' p≈ôipraven√Ω ostatn√≠mi z ƒçehokoliv", reward:"Pan√°k ginu + pivo"},
        {text:"Hoƒè kostkou ‚Äì ƒç√≠slo urƒç√≠, kolik pan√°k≈Ø mus√≠≈° vyp√≠t bƒõhem 5 minut", reward:"Titul Legenda veƒç√≠rku"},
      ]
    };

    // State
    let currentLevel = null;
    let currentTask = null;
    const drinkLog = [];

    // Elements
    const difficultyButtons = document.getElementById('difficultyButtons');
    const taskCard = document.getElementById('taskCard');
    const badgeLevel = document.getElementById('badgeLevel');
    const taskText = document.getElementById('taskText');
    const rewardLine = document.getElementById('rewardLine');
    const taskReward = document.getElementById('taskReward');
    const btnDone = document.getElementById('btnDone');
    const btnFail = document.getElementById('btnFail');
    const btnNext = document.getElementById('btnNext');
    const emptyLog = document.getElementById('emptyLog');
    const drinkList = document.getElementById('drinkLog');
    const drinkSummary = document.getElementById('drinkSummary');

    function levelLabel(level){
      return ({lehka:'Lehk√°', stredni:'St≈ôedn√≠', tezka:'Tƒõ≈æk√°', sormovice:'Zasran√° ≈†ormovice'})[level] || level;
    }

    function drawTask(level){
      currentLevel = level;
      const pool = tasks[level];
      if(!pool || pool.length===0){
        alert('V t√©to obt√≠≈ænosti nejsou ≈æ√°dn√© √∫koly. P≈ôidej nƒõjak√Ω n√≠≈æe.');
        return;
      }
      currentTask = pool[Math.floor(Math.random()*pool.length)];
      taskCard.style.display = 'block';
      badgeLevel.textContent = levelLabel(level);
      taskText.textContent = currentTask.text;
      rewardLine.style.display = 'none';
      btnNext.style.display = 'none';
      btnDone.style.display = 'inline-block';
      btnFail.style.display = 'inline-block';
      taskReward.textContent = currentTask.reward;
    }

    difficultyButtons.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-level]');
      if(!btn) return;
      drawTask(btn.dataset.level);
    });

    btnDone.addEventListener('click', ()=>{
      if(!currentTask) return;
      rewardLine.style.display = 'block';
      drinkLog.push(currentTask.reward);
      renderDrinks();
      btnDone.style.display = 'none';
      btnFail.style.display = 'none';
      btnNext.style.display = 'inline-block';
    });

    btnFail.addEventListener('click', ()=>{
      // √ökol se vrac√≠ do slosov√°n√≠ ‚Äì jen skryjeme kartu
      currentTask = null;
      taskCard.style.display = 'none';
    });

    btnNext.addEventListener('click', ()=>{
      drawTask(currentLevel);
    });

    function renderDrinks(){
      if(drinkLog.length===0){
        emptyLog.style.display = 'block';
        drinkList.style.display = 'none';
        drinkSummary.style.display = 'none';
        return;
      }
      emptyLog.style.display = 'none';
      drinkList.style.display = 'block';
      drinkList.innerHTML = '';
      drinkLog.forEach((r,i)=>{
        const li = document.createElement('li');
        li.textContent = r;
        drinkList.appendChild(li);
      });

      // Souhrn podle typu odmƒõny
      const map = new Map();
      drinkLog.forEach(r=>map.set(r,(map.get(r)||0)+1));
      drinkSummary.style.display = 'flex';
      drinkSummary.innerHTML = '';
      [...map.entries()].forEach(([name,count])=>{
        const span = document.createElement('span');
        span.className='pill';
        span.textContent = `${name} ¬∑ ${count}√ó`;
        drinkSummary.appendChild(span);
      });
    }

    // P≈ôid√°v√°n√≠ √∫kolu
    const inputTask = document.getElementById('inputTask');
    const inputReward = document.getElementById('inputReward');
    const selectLevel = document.getElementById('selectLevel');
    const btnAdd = document.getElementById('btnAdd');

    btnAdd.addEventListener('click', ()=>{
      const text = inputTask.value.trim();
      const reward = inputReward.value.trim();
      const level = selectLevel.value;
      if(!text || !reward){
        alert('Vypl≈à text √∫kolu i odmƒõnu.');
        return;
      }
      tasks[level].push({text,reward});
      inputTask.value = '';
      inputReward.value = '';
      selectLevel.value = 'lehka';
      // Kr√°tk√© potvrzen√≠
      btnAdd.textContent = 'P≈ôid√°no ‚úî';
      setTimeout(()=>btnAdd.textContent='P≈ôidat √∫kol',800);
    });
  </script>
</body>
</html>
